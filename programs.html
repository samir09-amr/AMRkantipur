<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3041015200590330"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pharmacy Health Club Programs</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --accent: #f59e0b;
            --dark: #1f2937;
            --light: #f9fafb;
            --gray: #6b7280;
            --light-gray: #e5e7eb;
            --card-bg: rgba(255, 255, 255, 0.9);
            --card-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --hover-shadow: 0 35px 60px -12px rgba(0, 0, 0, 0.4);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }
        
        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .dot {
            position: absolute;
            width: 6px;
            height: 6px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            animation: float 15s infinite ease-in-out;
        }
        
        .connecting-line {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            transform-origin: 0 0;
            height: 1px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        /* Header Styles */
        .header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 3rem 2rem;
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            transform-style: preserve-3d;
            perspective: 1000px;
            animation: fadeIn 1s ease-out;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
        }
        
        .title {
            font-family: 'Montserrat', sans-serif;
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-dark), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .subtitle {
            font-size: 1.3rem;
            color: var(--gray);
            max-width: 800px;
            margin: 0 auto 2.5rem;
        }
        
        /* Programs Grid */
        .programs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2.5rem;
            margin-top: 2rem;
        }
        
        .program-card {
            background: var(--card-bg);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: all 0.4s ease;
            position: relative;
            cursor: pointer;
            transform-style: preserve-3d;
            perspective: 1000px;
            animation: cardAppear 0.6s forwards;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        @keyframes cardAppear {
            0% {
                opacity: 0;
                transform: translateY(50px) rotateY(30deg);
            }
            100% {
                opacity: 1;
                transform: translateY(0) rotateY(0);
            }
        }
        
        .program-card:hover {
            transform: translateY(-15px) rotateY(5deg) scale(1.03);
            box-shadow: var(--hover-shadow);
        }
        
        .card-image {
            height: 250px;
            overflow: hidden;
            position: relative;
            transform-style: preserve-3d;
        }
        
        .card-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent 0%, rgba(0, 0, 0, 0.7) 100%);
            z-index: 1;
        }
        
        .program-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.5s ease;
            transform: translateZ(20px);
        }
        
        .program-card:hover .program-image {
            transform: scale(1.1) translateZ(30px);
        }
        
        .program-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            z-index: 2;
            transform: translateZ(30px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .card-content {
            padding: 2rem;
            transform-style: preserve-3d;
        }
        
        .program-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            transform: translateZ(20px);
        }
        
        .program-description {
            color: var(--gray);
            margin-bottom: 1.5rem;
            line-height: 1.6;
            transform: translateZ(15px);
        }
        
        .view-details-btn {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            transform: translateZ(25px);
            box-shadow: 0 5px 15px rgba(79, 70, 229, 0.3);
        }
        
        .view-details-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            transform: translateY(-3px) translateZ(30px);
            box-shadow: 0 8px 20px rgba(79, 70, 229, 0.4);
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
            backdrop-filter: blur(10px);
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background: var(--card-bg);
            border-radius: 20px;
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--hover-shadow);
            transform: scale(0.9) rotateX(10deg);
            opacity: 0;
            transition: all 0.4s ease;
            display: flex;
            flex-direction: column;
            transform-style: preserve-3d;
            perspective: 1000px;
        }
        
        .modal-overlay.active .modal {
            transform: scale(1) rotateX(0);
            opacity: 1;
        }
        
        .modal-header {
            padding: 2rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            position: relative;
            transform-style: preserve-3d;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            transform: translateZ(20px);
            font-size: 1.5rem;
        }
        
        .close-modal:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg) translateZ(25px);
        }
        
        .program-header {
            display: flex;
            align-items: center;
            gap: 2rem;
            transform: translateZ(15px);
        }
        
        .program-header-image {
            width: 200px;
            height: 150px;
            object-fit: cover;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 3px solid rgba(255, 255, 255, 0.3);
            transform: translateZ(30px);
        }
        
        .program-header-text h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }
        
        .program-header-text p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .modal-body {
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            transform-style: preserve-3d;
        }
        
        .modal-section {
            margin-bottom: 1rem;
            transform: translateZ(10px);
        }
        
        .modal-section h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light-gray);
            display: flex;
            align-items: center;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.4rem;
        }
        
        .modal-section h3 i {
            margin-right: 10px;
            color: var(--accent);
        }
        
        .modal-section p {
            line-height: 1.6;
            color: var(--dark);
        }
        
        .content-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }
        
        /* Enhanced Gallery Styles */
        .program-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            height: 200px;
            cursor: pointer;
            transform-style: preserve-3d;
        }
        
        .gallery-item:hover {
            transform: translateY(-5px) translateZ(15px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .gallery-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.5s ease;
        }
        
        .gallery-item:hover .gallery-image {
            transform: scale(1.1);
        }
        
        .gallery-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 12px;
            font-size: 1rem;
            text-align: center;
            transform: translateY(0);
            transition: all 0.3s ease;
        }
        
        .location-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .location-icon {
            color: var(--accent);
            font-size: 1.2rem;
        }
        
        /* Image Preview Modal */
        .image-preview-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
        }
        
        .image-preview-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .image-preview-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
            transform: scale(0.9);
            transition: all 0.4s ease;
            text-align: center;
        }
        
        .image-preview-modal.active .image-preview-content {
            transform: scale(1);
        }
        
        .preview-image {
            max-width: 100%;
            max-height: 70vh;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
        }
        
        .preview-caption {
            color: white;
            text-align: center;
            margin-top: 20px;
            font-size: 1.5rem;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            padding: 0 20px;
        }
        
        .close-preview {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 2.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1002;
            background: rgba(0, 0, 0, 0.5);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .close-preview:hover {
            color: var(--accent);
            transform: rotate(90deg);
        }
        
        /* Navigation arrows */
        .nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1002;
            background: rgba(0, 0, 0, 0.5);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .nav-arrow:hover {
            background: rgba(0, 0, 0, 0.7);
            transform: translateY(-50%) scale(1.1);
        }
        
        .prev-arrow {
            left: 20px;
        }
        
        .next-arrow {
            right: 20px;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-20px) translateX(10px); }
            50% { transform: translateY(-10px) translateX(-15px); }
            75% { transform: translateY(10px) translateX(-5px); }
        }
        
        /* Responsive Design */
        @media (max-width: 1024px) {
            .content-columns {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .program-header {
                flex-direction: column;
                text-align: center;
            }
            
            .program-header-image {
                width: 100%;
                max-width: 300px;
            }
            
            .program-gallery {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .title {
                font-size: 2.5rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            .programs-grid {
                grid-template-columns: 1fr;
            }
            
            .program-header-text h2 {
                font-size: 1.8rem;
            }
            
            .modal {
                width: 95%;
                margin: 2% auto;
                padding: 15px;
            }
            
            .close-preview {
                top: 10px;
                right: 10px;
                font-size: 2rem;
                width: 40px;
                height: 40px;
            }
            
            .nav-arrow {
                font-size: 2rem;
                width: 50px;
                height: 50px;
            }
            
            .program-gallery {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .gallery-item {
                height: 180px;
            }
        }
    </style>
</head>
<body>
    <div class="bg-animation">
        <div class="dot" style="top: 20%; left: 20%; animation-delay: 0s;"></div>
        <div class="dot" style="top: 60%; left: 80%; animation-delay: 2s;"></div>
        <div class="dot" style="top: 40%; left: 40%; animation-delay: 4s;"></div>
        <div class="dot" style="top: 80%; left: 30%; animation-delay: 6s;"></div>
        <div class="dot" style="top: 30%; left: 70%; animation-delay: 8s;"></div>
        <div class="dot" style="top: 70%; left: 60%; animation-delay: 10s;"></div>
        <div class="dot" style="top: 50%; left: 10%; animation-delay: 12s;"></div>
        <div class="dot" style="top: 10%; left: 50%; animation-delay: 14s;"></div>
    </div>
    
    <div class="container">
        <header class="header">
            <h1 class="title">Pharmacy Health Club Programs</h1>
            <p class="subtitle">Explore our impactful initiatives in AMR awareness, dengue prevention, and community health</p>
        </header>
        
        <div class="programs-grid" id="programsContainer">
            <!-- Programs will be added here dynamically -->
        </div>
    </div>
    
    <!-- Program Detail Modal -->
    <div class="modal-overlay" id="programModal">
        <div class="modal">
            <div class="modal-header">
                <div class="close-modal" id="closeModal"><i class="fas fa-times"></i></div>
                <div class="program-header">
                    <img id="modalProgramImage" class="program-header-image" src="" alt="">
                    <div class="program-header-text">
                        <h2 id="modalProgramTitle"></h2>
                        <p id="modalProgramDescription"></p>
                    </div>
                </div>
            </div>
            <div class="modal-body" id="programDetails">
                <!-- Program details will be added here dynamically -->
            </div>
        </div>
    </div>
    
    <!-- Image Preview Modal -->
    <div class="image-preview-modal" id="imagePreviewModal">
        <div class="nav-arrow prev-arrow" id="prevArrow"><i class="fas fa-chevron-left"></i></div>
        <div class="nav-arrow next-arrow" id="nextArrow"><i class="fas fa-chevron-right"></i></div>
        <span class="close-preview" id="closePreview"><i class="fas fa-times"></i></span>
        <div class="image-preview-content">
            <img id="previewImage" class="preview-image" src="" alt="">
            <p id="previewCaption" class="preview-caption"></p>
        </div>
    </div>

    <script>
        // Function to convert Google Drive shareable links to direct image links
        function convertGoogleDriveLink(url) {
            // Check if it's a Google Drive URL
            if (url.includes('drive.google.com')) {
                // Extract file ID from different Google Drive URL formats
                let fileId;
                
                if (url.includes('/file/d/')) {
                    // Format: https://drive.google.com/file/d/{fileId}/view
                    fileId = url.split('/file/d/')[1].split('/')[0];
                } else if (url.includes('id=')) {
                    // Format: https://drive.google.com/open?id={fileId}
                    fileId = url.split('id=')[1];
                    // Remove any additional parameters
                    fileId = fileId.split('&')[0];
                }
                
                if (fileId) {
                    return `https://lh3.googleusercontent.com/d/${fileId}=s600?authuser=0`;
                }
            }
            
            // Return original URL if not a Google Drive link or if extraction failed
            return url;
        }

        // Sample program data
        const programs = [
            {
                id: 1,
                title: "AMR Awareness Campaign",
                image: "https://drive.google.com/file/d/1FDguBsxIKrHj4UthodCkqIrujFIJevt1/view?usp=sharing",
                shortDescription: "Comprehensive program to combat antimicrobial resistance through education and community engagement",
                introduction: "Our Antimicrobial Resistance (AMR) Awareness Campaign is a multi-faceted initiative designed to address the growing threat of drug-resistant infections. Through community workshops, healthcare professional training, and public awareness events, we're working to preserve the effectiveness of antibiotics for future generations.",
                objectives: "1. Educate the public about proper antibiotic use\n2. Train healthcare professionals on antimicrobial stewardship\n3. Promote infection prevention practices\n4. Advocate for policy changes to combat AMR",
                targetGroup: "General public, healthcare professionals, policymakers, and community leaders",
                location: "Various locations across the community including health centers, schools, and public spaces",
                outcomes: "Increased awareness about AMR, reduction in inappropriate antibiotic use, improved prescribing practices among healthcare providers, and establishment of a community AMR task force",
                additionalPhotos: [
                    {url: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link", caption: "Community workshop on antibiotic use"},
                    {url: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link", caption: "Healthcare professional training session"},
                    {url: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link", caption: "Public awareness event at local health fair"},
                    {url: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link", caption: "Educational materials distribution"}
                ]
            },
            {
                id: 2,
                title: "Dengue Prevention Initiative",
                image: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link",
                shortDescription: "Community-based program to reduce dengue transmission through prevention and education",
                introduction: "The Dengue Prevention Initiative focuses on reducing the incidence of dengue fever in our community through a comprehensive approach that includes vector control, public education, and community mobilization. Our program empowers residents to take proactive measures against mosquito breeding and dengue transmission.",
                objectives: "1. Reduce mosquito breeding sites in the community\n2. Educate residents about dengue prevention\n3. Train community health workers on vector control\n4. Establish a dengue surveillance and response system",
                targetGroup: "Community residents, schools, local businesses, and healthcare facilities",
                location: "High-risk neighborhoods and community centers across the region",
                outcomes: "Significant reduction in mosquito breeding sites, increased knowledge about dengue prevention, decreased dengue incidence rates, and establishment of a community-based surveillance system",
                additionalPhotos: [
                    {url: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link", caption: "Community clean-up activity to eliminate breeding sites"},
                    {url: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link", caption: "Educational session at local school"},
                    {url: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link", caption: "Distribution of prevention materials door-to-door"},
                    {url: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link", caption: "Mosquito larvae monitoring and elimination"}
                ]
            },
            {
                id: 3,
                title: "Community Health Outreach",
                image: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link",
                shortDescription: "Mobile health services bringing essential care to underserved communities",
                introduction: "Our Community Health Outreach program delivers essential healthcare services directly to underserved populations. Through mobile clinics, health screenings, and preventive care services, we're working to reduce health disparities and improve health outcomes in our community.",
                objectives: "1. Provide basic health services to underserved populations\n2. Conduct health screenings and referrals\n3. Deliver health education on preventive care\n4. Build partnerships with local organizations",
                targetGroup: "Underserved communities, low-income families, elderly residents, and homeless populations",
                location: "Various community locations including shelters, community centers, and rural areas",
                outcomes: "Thousands of patients served, early detection of health conditions, increased access to preventive services, and strengthened community health network",
                additionalPhotos: [
                    {url: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link", caption: "Mobile health clinic in action"},
                    {url: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link", caption: "Health screening for community members"},
                    {url: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link", caption: "Distribution of health information materials"},
                    {url: "https://drive.google.com/file/d/1Pb3KXXTwpE6PJK3FgneQ1wuADvKIRuz6/view?usp=drive_link", caption: "Vaccination drive in rural community"}
                ]
            }
        ];

        // DOM Elements
        const programsContainer = document.getElementById('programsContainer');
        const programModal = document.getElementById('programModal');
        const programDetails = document.getElementById('programDetails');
        const closeModal = document.getElementById('closeModal');
        const imagePreviewModal = document.getElementById('imagePreviewModal');
        const previewImage = document.getElementById('previewImage');
        const previewCaption = document.getElementById('previewCaption');
        const closePreview = document.getElementById('closePreview');
        const modalProgramImage = document.getElementById('modalProgramImage');
        const modalProgramTitle = document.getElementById('modalProgramTitle');
        const modalProgramDescription = document.getElementById('modalProgramDescription');
        const prevArrow = document.getElementById('prevArrow');
        const nextArrow = document.getElementById('nextArrow');

        // Global variables for gallery navigation
        let currentGallery = [];
        let currentImageIndex = 0;

        // Display all programs
        function displayPrograms() {
            programsContainer.innerHTML = '';
            
            programs.forEach(program => {
                const programCard = document.createElement('div');
                programCard.className = 'program-card';
                
                const imageUrl = convertGoogleDriveLink(program.image);
                
                programCard.innerHTML = `
                    <div class="card-image">
                        <img src="${imageUrl}" alt="${program.title}" class="program-image" onerror="this.onerror=null; this.src='https://placehold.co/600x400/6366f1/ffffff?text=${program.title.split(' ').map(word => word[0]).join('')}'">
                        <div class="program-badge">Health Initiative</div>
                    </div>
                    <div class="card-content">
                        <h3 class="program-title">${program.title}</h3>
                        <p class="program-description">${program.shortDescription}</p>
                        <a href="#" class="view-details-btn" data-id="${program.id}">View Details</a>
                    </div>
                `;
                
                programsContainer.appendChild(programCard);
            });
            
            // Add event listeners to "View Details" buttons
            document.querySelectorAll('.view-details-btn').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const programId = parseInt(this.getAttribute('data-id'));
                    showProgramDetails(programId);
                });
            });
        }

        // Show program details in modal
        function showProgramDetails(programId) {
            const program = programs.find(p => p.id === programId);
            
            if (!program) return;
            
            const imageUrl = convertGoogleDriveLink(program.image);
            
            // Set modal header content
            modalProgramImage.src = imageUrl;
            modalProgramImage.onerror = function() {
                this.src = `https://placehold.co/600x400/6366f1/ffffff?text=${program.title.split(' ').map(word => word[0]).join('')}`;
            };
            modalProgramTitle.textContent = program.title;
            modalProgramDescription.textContent = program.shortDescription;
            
            // Set modal body content with new layout
            programDetails.innerHTML = `
                <div class="content-columns">
                    <div>
                        <div class="modal-section">
                            <h3><i class="fas fa-info-circle"></i> Introduction</h3>
                            <p>${program.introduction.replace(/\n/g, '<br>')}</p>
                        </div>
                        
                        <div class="modal-section">
                            <h3><i class="fas fa-bullseye"></i> Objectives</h3>
                            <p>${program.objectives.replace(/\n/g, '<br>')}</p>
                        </div>
                        
                        <div class="modal-section">
                            <h3><i class="fas fa-users"></i> Target Group</h3>
                            <p>${program.targetGroup.replace(/\n/g, '<br>')}</p>
                        </div>
                    </div>
                    
                    <div>
                        <div class="modal-section">
                            <h3><i class="fas fa-map-marker-alt"></i> Location</h3>
                            <div class="location-info">
                                <span class="location-icon">📍</span>
                                <p>${program.location}</p>
                            </div>
                        </div>
                        
                        <div class="modal-section">
                            <h3><i class="fas fa-chart-line"></i> Outcomes</h3>
                            <p>${program.outcomes.replace(/\n/g, '<br>')}</p>
                        </div>
                    </div>
                </div>
                
                ${program.additionalPhotos && program.additionalPhotos.length > 0 ? `
                <div class="modal-section">
                    <h3><i class="fas fa-images"></i> Program Gallery</h3>
                    <div class="program-gallery">
                        ${program.additionalPhotos.map(photo => {
                            const photoUrl = convertGoogleDriveLink(photo.url);
                            return `
                                <div class="gallery-item" data-url="${photoUrl}" data-caption="${photo.caption}">
                                    <img src="${photoUrl}" alt="${photo.caption}" class="gallery-image" onerror="this.onerror=null; this.src='https://placehold.co/600x400/6366f1/ffffff?text=Photo'">
                                    <div class="gallery-caption">${photo.caption}</div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
                ` : ''}
            `;
            
            // Store current gallery for navigation
            currentGallery = program.additionalPhotos || [];
            
            // Add event listeners to gallery items (both image and caption)
            document.querySelectorAll('.gallery-item').forEach((item, index) => {
                item.addEventListener('click', function() {
                    showImagePreview(index);
                });
            });
            
            programModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Show image preview modal
        function showImagePreview(index) {
            if (currentGallery.length === 0) return;
            
            currentImageIndex = index;
            const photo = currentGallery[index];
            const photoUrl = convertGoogleDriveLink(photo.url);
            
            previewImage.src = photoUrl;
            previewImage.onerror = function() {
                this.src = 'https://placehold.co/800x600/6366f1/ffffff?text=Image+Not+Found';
            };
            previewCaption.textContent = photo.caption;
            imagePreviewModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Navigate to previous image
        function showPrevImage() {
            if (currentGallery.length === 0) return;
            
            currentImageIndex = (currentImageIndex - 1 + currentGallery.length) % currentGallery.length;
            const photo = currentGallery[currentImageIndex];
            const photoUrl = convertGoogleDriveLink(photo.url);
            
            previewImage.src = photoUrl;
            previewImage.onerror = function() {
                this.src = 'https://placehold.co/800x600/6366f1/ffffff?text=Image+Not+Found';
            };
            previewCaption.textContent = photo.caption;
        }

        // Navigate to next image
        function showNextImage() {
            if (currentGallery.length === 0) return;
            
            currentImageIndex = (currentImageIndex + 1) % currentGallery.length;
            const photo = currentGallery[currentImageIndex];
            const photoUrl = convertGoogleDriveLink(photo.url);
            
            previewImage.src = photoUrl;
            previewImage.onerror = function() {
                this.src = 'https://placehold.co/800x600/6366f1/ffffff?text=Image+Not+Found';
            };
            previewCaption.textContent = photo.caption;
        }

        // Close image preview modal
        function closeImagePreview() {
            imagePreviewModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Close modal
        function closeModalFunc() {
            programModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Create connecting lines between dots
        function createConnectingLines() {
            const dots = document.querySelectorAll('.dot');
            const container = document.querySelector('.bg-animation');
            
            // Clear existing lines
            document.querySelectorAll('.connecting-line').forEach(line => line.remove());
            
            dots.forEach(dot => {
                dots.forEach(otherDot => {
                    if (dot !== otherDot) {
                        const line = document.createElement('div');
                        line.className = 'connecting-line';
                        
                        const dotRect = dot.getBoundingClientRect();
                        const otherDotRect = otherDot.getBoundingClientRect();
                        
                        const dotX = dotRect.left + dotRect.width / 2;
                        const dotY = dotRect.top + dotRect.height / 2;
                        const otherDotX = otherDotRect.left + otherDotRect.width / 2;
                        const otherDotY = otherDotRect.top + otherDotRect.height / 2;
                        
                        const distance = Math.sqrt(Math.pow(otherDotX - dotX, 2) + Math.pow(otherDotY - dotY, 2));
                        
                        if (distance < 250) {
                            line.style.width = distance + 'px';
                            line.style.left = dotX + 'px';
                            line.style.top = dotY + 'px';
                            
                            const angle = Math.atan2(otherDotY - dotY, otherDotX - dotX) * 180 / Math.PI;
                            line.style.transform = `rotate(${angle}deg)`;
                            
                            container.appendChild(line);
                        }
                    }
                });
            });
        }

        // Event Listeners
        closeModal.addEventListener('click', closeModalFunc);
        closePreview.addEventListener('click', closeImagePreview);
        prevArrow.addEventListener('click', showPrevImage);
        nextArrow.addEventListener('click', showNextImage);

        // Keyboard navigation for gallery
        document.addEventListener('keydown', (e) => {
            if (imagePreviewModal.classList.contains('active')) {
                if (e.key === 'ArrowLeft') {
                    showPrevImage();
                } else if (e.key === 'ArrowRight') {
                    showNextImage();
                } else if (e.key === 'Escape') {
                    closeImagePreview();
                }
            }
        });

        // Close modals when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === programModal) {
                closeModalFunc();
            }
            if (e.target === imagePreviewModal) {
                closeImagePreview();
            }
        });

        // Initialize
        displayPrograms();
        
        // Create connecting lines after a delay to allow dots to position
        setTimeout(() => {
            createConnectingLines();
        }, 1000);
        
        // Update connecting lines on window resize
        window.addEventListener('resize', () => {
            setTimeout(createConnectingLines, 500);
        });
    </script>
</body>
</html>

